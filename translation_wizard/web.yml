
##############################################################3
##### 3.6 - Install web packages
##
#

# Use the yum module to install the two packages onto your web server
# Help: https://docs.ansible.com/ansible/latest/modules/yum_module.html
- name: Install packages
  yum:
    state: present
    name:
      - httpd
      - php


# Use the lineinfile module to update the httpd port
# Help: https://docs.ansible.com/ansible/latest/modules/lineinfile_module.html
- name: Configure Apache Port
  lineinfile:
    path: /etc/httpd/conf/httpd.conf
    regexp: "^Listen "
    line: "Listen 80"


# Use the service module to make the Apache web server is running
# Help: https://docs.ansible.com/ansible/latest/modules/service_module.html
- name: restart httpd
  service:
    name: httpd
    state: restarted



##############################################################3
##### 3.7 - Deploy web site content
##
#


# Perform a git clone of the web content from the referenced repo
# Help: https://docs.ansible.com/ansible/latest/modules/git_module.html
-  name: Promote web content
   git:
     repo: https://github.com/keithresar/infrastructure-as-code-web
     dest: /var/www/html
     update: no
     force: yes




